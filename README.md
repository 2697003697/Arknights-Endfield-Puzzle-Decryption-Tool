# 终末地拼图求解工具

一个基于Web的拼图求解器，支持自定义拼图形状、网格约束条件，并使用回溯算法自动求解。

## 功能特性

### 1. 网格设置
- 自定义网格行数和列数（1-20）
- 支持在网格中设置数字约束（表示该位置需要被多少块拼图覆盖）
- 支持添加障碍物（不能被拼图覆盖的格子）
- 支持预填充拼图（已存在的拼图格子，计入拼图数量）

### 2. 拼图编辑
- 可视化拼图编辑器，支持自由绘制拼图形状
- 支持拖拽填充，快速创建拼图
- 可调整拼图编辑器画布大小
- 支持添加多个拼图
- 可编辑拼图名称

### 3. 求解功能
- 使用回溯算法自动求解拼图放置方案
- 求解结果以不同颜色区分不同拼图
- 显示求解状态（成功/失败）
- 提供图例说明，清晰展示每种拼图的分布


## 使用方法

### 1. 创建网格
1. 在"网格设置"区域输入行数和列数
2. 点击"创建网格"按钮
3. 在网格中点击格子设置数字约束（表示该位置需要被多少块拼图覆盖）

### 2. 添加障碍物和预填充拼图（可选）
- 点击"障碍物"按钮，然后在网格中点击或拖拽设置障碍物
- 点击"预填拼图"按钮，然后在网格中点击或拖拽设置预填充的拼图格子
- 点击"编辑约束"按钮返回正常编辑模式

### 3. 创建拼图
1. 在"拼图管理"区域的编辑器中绘制拼图形状
- 点击或拖拽格子来绘制
- 使用"绘制"或"擦除"模式切换
2. 点击"添加拼图"将当前拼图添加到列表
3. 可重复上述步骤添加多个拼图
4. 点击拼图名称可直接编辑

### 4. 求解
1. 点击"求解拼图"按钮
2. 等待求解完成
3. 查看求解结果和图例

### 5. 其他操作
- **清空网格**：清空所有约束、障碍物和预填充
- **清空格子**：仅清空障碍物和预填充格子，保留数字约束
- **清空拼图**：清空所有已添加的拼图
- **删除**：点击拼图旁边的"删除"按钮移除单个拼图

## 技术说明

- 纯前端实现，无需后端服务
- 使用原生HTML、CSS、JavaScript
- 回溯算法实现拼图求解
- 支持拖拽交互，提升用户体验
- `main.html` - 主程序文件，包含完整的HTML、CSS和JavaScript代码

## 本地运行

直接在浏览器中打开 `main.html` 文件即可使用。

```
双击 main.html
```

或使用本地服务器：

```bash
# Python 3
python -m http.server 8000

# 然后访问 http://localhost:8000/main.html
```

## 算法说明

本工具使用回溯算法（Backtracking）来求解拼图问题：

1. 从网格的左上角开始尝试放置拼图
2. 对于每个位置，尝试放置每个可用的拼图（考虑所有旋转和翻转形态）
3. 检查放置是否满足约束条件（数字约束、不重叠、不覆盖障碍物）
4. 如果放置成功，递归求解剩余网格
5. 如果无法继续，回溯并尝试其他放置方式
6. 重复直到找到完整解或确定无解

## 注意事项

1. 网格越大、拼图越多，求解时间可能越长
2. 确保拼图总面积与网格可放置区域匹配
3. 合理的数字约束可以减少求解时间
4. 如果求解时间过长，可以刷新页面重新开始

